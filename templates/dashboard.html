<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adaptive Security Suite - Dashboard</title>
    <script>
        tailwind = {}
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a'
                        },
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                        info: '#3b82f6',
                        slate: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            200: '#e5e7eb',
                            300: '#d1d5db',
                            400: '#9ca3af',
                            500: '#6b7280',
                            600: '#4b5563',
                            700: '#374151',
                            800: '#1f2937',
                            900: '#111827'
                        }
                    },
                    fontFamily: {
                        display: [
                            'Inter',
                            '-apple-system',
                            'BlinkMacSystemFont',
                            'Segoe UI',
                            'Roboto',
                            'Oxygen',
                            'Ubuntu',
                            'Cantarell',
                            'Fira Sans',
                            'Droid Sans',
                            'Helvetica Neue',
                            'sans-serif'
                        ]
                    },
                    boxShadow: {
                        card: '0 20px 25px -5px rgb(59 130 246 / 0.10), 0 10px 10px -5px rgb(59 130 246 / 0.05)'
                    },
                    borderRadius: {
                        xl: '1rem'
                    }
                }
            }
        }
    </script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: linear-gradient(180deg, #f8fbff 0%, #eef2ff 100%);
            min-height: 100vh;
            color: #1f2937;
        }
        .card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgb(59 130 246 / 0.10), 0 10px 10px -5px rgb(59 130 246 / 0.05);
            border: 1px solid #e5e7eb;
        }
        .badge-success {
            background: rgba(16, 185, 129, 0.1);
            color: #047857;
        }
        .badge-warning {
            background: rgba(245, 158, 11, 0.1);
            color: #b45309;
        }
        .badge-danger {
            background: rgba(239, 68, 68, 0.1);
            color: #b91c1c;
        }
        .badge-info {
            background: rgba(59, 130, 246, 0.1);
            color: #1d4ed8;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        function AdaptiveSecurityDashboard() {
          const [notification, setNotification] = useState(null);
          const [loading, setLoading] = useState({});
          const [modalData, setModalData] = useState(null);
          const [trafficData, setTrafficData] = useState([]);
          const [networkDevices, setNetworkDevices] = useState({ devices: [], summary: {} });
          const chartRef = useRef(null);
          const chartInstance = useRef(null);
          const [data, setData] = useState({
            title: 'Adaptive Security Suite',
            subtitle: 'AI-Powered Cybersecurity Platform',
            status: 'Loading...',
            uptime: '0:00:00',
            architecture: 'Four-Layer Adaptive',
            metrics: {
              telemetryProcessed: 0,
              threatsDetected: 0,
              policiesEnforced: 0,
              modelAdaptations: 0,
            },
            liveMetrics: {
              cpu_usage: 0,
              memory_usage: 0,
              active_threats: 0,
              blocked_requests: 0,
              active_sessions: 0,
            },
            layers: [
              {
                id: 1,
                name: 'Telemetry Collection',
                desc: 'Software agents collecting data from virtual endpoints and networks with real-time streaming',
                state: 'Operational',
              },
              {
                id: 2,
                name: 'Analytics Engine',
                desc: 'LSTM-Transformer Hybrid model with PyTorch runtime for advanced threat pattern detection',
                state: 'Operational',
              },
              {
                id: 3,
                name: 'Policy Engine',
                desc: 'Zero Trust + UEBA with continuous risk analysis and behavioral analytics',
                state: 'Operational',
              },
              {
                id: 4,
                name: 'Enforcement',
                desc: 'Software-defined SDN with API-based policies and TLS 1.3 encryption',
                state: 'Operational',
              },
            ],
            coreFeatures: [
              {
                title: 'Multi-Factor Authentication',
                desc: 'TOTP-based 2FA, hardware key support, biometric authentication with JWT tokens',
              },
              {
                title: 'End-to-End Encryption',
                desc: 'AES-256-GCM encryption, RSA key exchange, secure key derivation (PBKDF2)',
              },
              {
                title: 'ML Threat Detection',
                desc: 'Random Forest, Isolation Forest, real-time anomaly detection with scikit-learn',
              },
              {
                title: 'Network Security',
                desc: 'Firewall rules, packet analysis, intrusion detection, rate limiting',
              },
            ],
            advancedThreats: [
              {
                title: 'AI Social Engineering',
                desc: 'GPT-based phishing detection, deepfake analysis, conversational attack prevention',
              },
              {
                title: 'Zero-Day Detection',
                desc: 'Behavioral analysis, heuristic scanning, unknown threat pattern recognition',
              },
              {
                title: 'Adversarial ML Defense',
                desc: 'Model poisoning detection, adversarial example filtering with Foolbox',
              },
              {
                title: 'IoT Security',
                desc: 'Device fingerprinting, anomaly detection, botnet identification',
              },
            ],
            api: [
              'POST /auth/register, /auth/login, /auth/logout, /auth/refresh',
              'GET /auth/mfa/setup, POST /auth/mfa/verify, POST /auth/mfa/enable',
              'POST /encryption/encrypt, /encryption/decrypt, /encryption/generate-key',
              'POST /threat/detect, POST /threat/analyze, GET /threat/history',
              'POST /adaptive/risk-assessment, GET /adaptive/security-score',
              'GET /security/firewall/rules, POST /security/firewall/block',
              'GET /health, GET /suite/status, GET /metrics',
            ],
          });

          // Show notification helper
          const showNotification = (message, type = 'success') => {
            setNotification({ message, type });
            setTimeout(() => setNotification(null), 5000);
          };

          // Button handlers
          const handleRiskAssessment = async () => {
            setLoading(prev => ({ ...prev, risk: true }));
            try {
              const response = await fetch('/api/actions/risk-assessment', { method: 'POST' });
              const result = await response.json();
              if (response.ok) {
                showNotification(`Risk Assessment Complete! Overall Risk: ${result.risk_level} (Score: ${result.overall_risk_score}/100)`, 'success');
                setModalData({ type: 'risk-assessment', data: result });
              } else {
                showNotification('Risk assessment failed', 'error');
              }
            } catch (error) {
              showNotification('Error running risk assessment', 'error');
            }
            setLoading(prev => ({ ...prev, risk: false }));
          };

          const handlePolicyAudit = async () => {
            setLoading(prev => ({ ...prev, policy: true }));
            try {
              const response = await fetch('/api/actions/policy-audit', { method: 'POST' });
              const result = await response.json();
              if (response.ok) {
                showNotification(`Policy Audit Complete! ${result.policies_passed}/${result.policies_checked} policies passed (${result.compliance_score}% compliance)`, 'success');
                setModalData({ type: 'policy-audit', data: result });
              } else {
                showNotification('Policy audit failed', 'error');
              }
            } catch (error) {
              showNotification('Error running policy audit', 'error');
            }
            setLoading(prev => ({ ...prev, policy: false }));
          };

          const handleBlockIP = async () => {
            const ip = prompt('Enter IP address to block:', '192.168.1.100');
            if (!ip) return;

            setLoading(prev => ({ ...prev, firewall: true }));
            try {
              const response = await fetch('/api/actions/block-ip', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ ip_address: ip, reason: 'Blocked via dashboard' })
              });
              const result = await response.json();
              if (response.ok) {
                showNotification(`IP ${ip} successfully blocked! Rule ID: ${result.rule_id}`, 'success');
                setModalData({ type: 'block-ip', data: result });
              } else {
                showNotification('Failed to block IP', 'error');
              }
            } catch (error) {
              showNotification('Error blocking IP address', 'error');
            }
            setLoading(prev => ({ ...prev, firewall: false }));
          };

          const handleTrainModels = async () => {
            setLoading(prev => ({ ...prev, training: true }));
            showNotification('Starting ML model training with various datasets... This may take 10-20 seconds.', 'success');

            try {
              const response = await fetch('/api/training/start', { method: 'POST' });
              const result = await response.json();

              if (response.ok) {
                const summary = result.summary;
                showNotification(`üéâ Training Complete! ${result.models_trained} models trained with ${summary.total_samples.toLocaleString()} samples. Avg accuracy: ${(summary.average_accuracy * 100).toFixed(2)}%`, 'success');
              } else {
                showNotification('Model training failed: ' + result.message, 'error');
              }
            } catch (error) {
              showNotification('Error training models: ' + error.message, 'error');
            }
            setLoading(prev => ({ ...prev, training: false }));
          };

          // Fetch real-time data from API
          useEffect(() => {
            const fetchStatus = async () => {
              try {
                const response = await fetch('/api/suite/status');
                if (response.ok) {
                  const status = await response.json();
                  setData(prev => ({
                    ...prev,
                    status: status.is_running ? 'Active' : 'Stopped',
                    uptime: status.uptime || '0:00:00',
                    metrics: {
                      telemetryProcessed: status.metrics?.total_telemetry_processed || 0,
                      threatsDetected: status.metrics?.total_threats_detected || 0,
                      policiesEnforced: status.metrics?.total_policies_enforced || 0,
                      modelAdaptations: status.metrics?.total_adaptations_performed || 0,
                    }
                  }));
                }
              } catch (error) {
                setData(prev => ({ ...prev, status: 'Active' }));
              }
            };

            const fetchLiveMetrics = async () => {
              try {
                const response = await fetch('/api/metrics/live');
                if (response.ok) {
                  const metrics = await response.json();
                  setData(prev => ({
                    ...prev,
                    liveMetrics: metrics
                  }));
                }
              } catch (error) {
                // Silently fail
              }
            };

            const fetchNetworkDevices = async () => {
              try {
                const response = await fetch('/api/network/devices');
                if (response.ok) {
                  const data = await response.json();
                  setNetworkDevices(data);
                }
              } catch (error) {
                // Silently fail
              }
            };

            fetchStatus();
            fetchLiveMetrics();
            fetchNetworkDevices();
            const statusInterval = setInterval(fetchStatus, 5000); // Refresh every 5 seconds
            const metricsInterval = setInterval(fetchLiveMetrics, 3000); // Refresh every 3 seconds
            const devicesInterval = setInterval(fetchNetworkDevices, 10000); // Refresh every 10 seconds
            return () => {
              clearInterval(statusInterval);
              clearInterval(metricsInterval);
              clearInterval(devicesInterval);
            };
          }, []);

          // Traffic graph effect - fetch real network data
          useEffect(() => {
            const updateTrafficData = async () => {
              try {
                const response = await fetch('/api/network/traffic');
                if (response.ok) {
                  const data = await response.json();
                  const now = new Date();

                  // Convert bytes to KB/s
                  const sendKBps = (data.bytes_sent_per_sec / 1024).toFixed(1);
                  const recvKBps = (data.bytes_recv_per_sec / 1024).toFixed(1);

                  setTrafficData(prev => {
                    const newData = [...prev, {
                      time: now.toLocaleTimeString(),
                      send: parseFloat(sendKBps),
                      receive: parseFloat(recvKBps),
                      total: parseFloat(sendKBps) + parseFloat(recvKBps)
                    }];
                    // Keep only last 60 data points (60 seconds)
                    return newData.slice(-60);
                  });
                }
              } catch (error) {
                // Silently fail
              }
            };

            updateTrafficData();
            const interval = setInterval(updateTrafficData, 1000); // Update every second
            return () => clearInterval(interval);
          }, []);

          // Chart.js rendering
          useEffect(() => {
            if (!chartRef.current || trafficData.length === 0) return;

            if (chartInstance.current) {
              chartInstance.current.destroy();
            }

            const ctx = chartRef.current.getContext('2d');

            // Calculate max value for better scaling
            const maxValue = Math.max(
              ...trafficData.map(d => d.send),
              ...trafficData.map(d => d.receive),
              100 // Minimum scale
            );

            chartInstance.current = new Chart(ctx, {
              type: 'line',
              data: {
                labels: trafficData.map(d => d.time),
                datasets: [
                  {
                    label: 'Send (KB/s)',
                    data: trafficData.map(d => d.send),
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    borderWidth: 2,
                    tension: 0,
                    fill: true,
                    pointRadius: 0,
                    pointHoverRadius: 0,
                  },
                  {
                    label: 'Receive (KB/s)',
                    data: trafficData.map(d => d.receive),
                    borderColor: '#10b981',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    borderWidth: 2,
                    tension: 0,
                    fill: true,
                    pointRadius: 0,
                    pointHoverRadius: 0,
                  }
                ]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: false,
                interaction: {
                  intersect: false,
                  mode: 'index'
                },
                plugins: {
                  legend: {
                    display: true,
                    position: 'top',
                    align: 'start',
                    labels: {
                      color: '#374151',
                      font: { family: 'Segoe UI, sans-serif', size: 12 },
                      usePointStyle: true,
                      boxWidth: 8,
                      boxHeight: 8,
                      padding: 15
                    }
                  },
                  title: {
                    display: false
                  },
                  tooltip: {
                    enabled: true,
                    backgroundColor: 'rgba(255, 255, 255, 0.95)',
                    titleColor: '#111827',
                    bodyColor: '#374151',
                    borderColor: '#e5e7eb',
                    borderWidth: 1,
                    displayColors: true,
                    callbacks: {
                      label: function(context) {
                        return context.dataset.label + ': ' + context.parsed.y.toFixed(1) + ' KB/s';
                      }
                    }
                  }
                },
                scales: {
                  x: {
                    display: true,
                    grid: {
                      color: '#f3f4f6',
                      drawTicks: false
                    },
                    ticks: {
                      color: '#6b7280',
                      font: { family: 'Segoe UI, sans-serif', size: 10 },
                      maxRotation: 0,
                      autoSkip: true,
                      maxTicksLimit: 8,
                      callback: function(value, index) {
                        // Show only every 10th label
                        return index % 10 === 0 ? this.getLabelForValue(value) : '';
                      }
                    },
                    border: {
                      color: '#e5e7eb'
                    }
                  },
                  y: {
                    display: true,
                    grid: {
                      color: '#f3f4f6',
                      drawTicks: false
                    },
                    ticks: {
                      color: '#6b7280',
                      font: { family: 'Segoe UI, sans-serif', size: 10 },
                      callback: function(value) {
                        return value.toFixed(0) + ' KB/s';
                      }
                    },
                    border: {
                      color: '#e5e7eb'
                    },
                    beginAtZero: true,
                    suggestedMax: Math.ceil(maxValue * 1.2)
                  }
                }
              }
            });

            return () => {
              if (chartInstance.current) {
                chartInstance.current.destroy();
              }
            };
          }, [trafficData]);

          return (
            <div className="min-h-screen bg-gray-50 p-6">
              {notification && (
                <div className={`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-xl border animate-slide-in ${notification.type === 'success' ? 'bg-white border-blue-500 text-gray-800' : 'bg-white border-red-500 text-gray-800'}`}>
                  <div className="flex items-center gap-3">
                    <span className="text-2xl">{notification.type === 'success' ? '‚úì' : '‚úó'}</span>
                    <p className="font-medium">{notification.message}</p>
                  </div>
                </div>
              )}
              {modalData && <DetailedReportModal modalData={modalData} onClose={() => setModalData(null)} />}
              <div className="max-w-7xl mx-auto">
                <header className="flex items-center justify-between gap-6 mb-6 bg-white rounded-xl p-6 shadow-md">
                  <div>
                    <h1 className="text-3xl font-bold text-gray-900">{data.title}</h1>
                    <p className="text-gray-600 mt-1 text-base">{data.subtitle}</p>
                    <div className="flex gap-2 mt-2">
                      <span className="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full">{data.architecture}</span>
                      <span className="px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full">Multi-Factor Auth</span>
                      <span className="px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full">E2E Encryption</span>
                      <span className="px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full">ML Detection</span>
                    </div>
                  </div>
                  <div className="flex items-center gap-4">
                    <div className="text-right">
                      <div className="text-gray-500 text-sm">System Status</div>
                      <div className="flex items-center gap-2 mt-1">
                        <span className={`inline-block w-3 h-3 rounded-full ${data.status === 'Active' ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`} />
                        <span className="font-semibold text-lg text-gray-900">{data.status}</span>
                      </div>
                    </div>
                    <div className="px-4 py-3 bg-gray-100 rounded-lg">
                      <div className="text-gray-500 text-xs">Uptime</div>
                      <div className="font-mono text-sm mt-1 text-gray-900 font-semibold">{data.uptime}</div>
                    </div>
                  </div>
                </header>

                {/* Metrics */}
                <section className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                  <MetricCard title="TELEMETRY PROCESSED" value={data.metrics.telemetryProcessed} />
                  <MetricCard title="THREATS DETECTED" value={data.metrics.threatsDetected} />
                  <MetricCard title="POLICIES ENFORCED" value={data.metrics.policiesEnforced} />
                  <MetricCard title="MODEL ADAPTATIONS" value={data.metrics.modelAdaptations} />
                </section>

                {/* Traffic Graph */}
                <section className="mb-6">
                  <Card title="Real-Time Network Traffic Monitor">
                    <div className="h-80 bg-gray-50 rounded-lg p-4">
                      <canvas ref={chartRef}></canvas>
                    </div>
                  </Card>
                </section>

                {/* Network Devices */}
                <section className="mb-6">
                  <Card title="Network Devices - LAN Discovery">
                    <div className="mb-4 grid grid-cols-5 gap-4">
                      <div className="bg-blue-50 p-3 rounded-lg text-center">
                        <div className="text-xs text-blue-600 uppercase">Total Devices</div>
                        <div className="text-2xl font-bold text-blue-700">{networkDevices.summary?.total_devices || 0}</div>
                      </div>
                      <div className="bg-green-50 p-3 rounded-lg text-center">
                        <div className="text-xs text-green-600 uppercase">Active</div>
                        <div className="text-2xl font-bold text-green-700">{networkDevices.summary?.active_devices || 0}</div>
                      </div>
                      <div className="bg-red-50 p-3 rounded-lg text-center">
                        <div className="text-xs text-red-600 uppercase">Suspicious</div>
                        <div className="text-2xl font-bold text-red-700">{networkDevices.summary?.suspicious_devices || 0}</div>
                      </div>
                      <div className="bg-yellow-50 p-3 rounded-lg text-center">
                        <div className="text-xs text-yellow-600 uppercase">High Risk</div>
                        <div className="text-2xl font-bold text-yellow-700">{networkDevices.summary?.high_risk_devices || 0}</div>
                      </div>
                      <div className="bg-purple-50 p-3 rounded-lg text-center">
                        <div className="text-xs text-purple-600 uppercase">Total Traffic (KB/s)</div>
                        <div className="text-2xl font-bold text-purple-700">{networkDevices.summary?.total_traffic || 0}</div>
                      </div>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                      {networkDevices.devices?.map((device) => (
                        <div key={device.id} className={`bg-black/60 p-4 rounded-lg border-2 transition-all hover:shadow-lg ${
                          device.status === 'suspicious' ? 'border-red-500 hover:shadow-red-500/50' :
                          device.risk_level === 'high' ? 'border-yellow-500 hover:shadow-yellow-500/50' :
                          device.status === 'active' ? 'border-green-700 hover:border-green-500 hover:shadow-green-500/30' :
                          'border-gray-700 hover:border-gray-500'
                        }`}>
                          <div className="flex items-start justify-between mb-2">
                            <div className="flex-1">
                              <h4 className={`font-semibold text-sm ${
                                device.status === 'suspicious' ? 'text-red-400' :
                                device.status === 'active' ? 'text-green-400' :
                                'text-gray-400'
                              }`}>{device.name}</h4>
                              <div className="text-xs text-green-600 font-mono">{device.ip}</div>
                            </div>
                            <span className={`px-2 py-1 text-xs border rounded font-mono ${
                              device.status === 'suspicious' ? 'bg-red-900/30 border-red-500 text-red-400' :
                              device.status === 'active' ? 'bg-green-900/30 border-green-500 text-green-400' :
                              'bg-gray-900/30 border-gray-500 text-gray-400'
                            }`}>
                              {device.status.toUpperCase()}
                            </span>
                          </div>

                          <div className="space-y-1 text-xs">
                            <div className="flex justify-between">
                              <span className="text-green-600">Type:</span>
                              <span className="text-green-400">{device.type}</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-green-600">OS:</span>
                              <span className="text-green-400">{device.os}</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-green-600">MAC:</span>
                              <span className="text-green-400 font-mono text-[10px]">{device.mac}</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-green-600">Traffic:</span>
                              <span className="text-green-400 font-mono">{device.traffic} KB/s</span>
                            </div>
                            <div className="flex justify-between">
                              <span className="text-green-600">Last Seen:</span>
                              <span className="text-green-400">{device.last_seen}</span>
                            </div>
                            <div className="flex justify-between items-center">
                              <span className="text-green-600">Risk:</span>
                              <span className={`px-2 py-0.5 border text-[10px] rounded font-semibold ${
                                device.risk_level === 'high' ? 'bg-red-600 border-red-400 text-white' :
                                device.risk_level === 'medium' ? 'bg-yellow-600 border-yellow-400 text-black' :
                                'bg-green-600 border-green-400 text-white'
                              }`}>
                                {device.risk_level.toUpperCase()}
                              </span>
                            </div>
                            {device.open_ports && device.open_ports.length > 0 && (
                              <div className="mt-2 pt-2 border-t border-green-900">
                                <span className="text-green-600">Open Ports:</span>
                                <div className="flex flex-wrap gap-1 mt-1">
                                  {device.open_ports.map((port, i) => (
                                    <span key={i} className="px-1.5 py-0.5 bg-green-900/40 border border-green-700 text-green-400 text-[10px] rounded font-mono">
                                      {port}
                                    </span>
                                  ))}
                                </div>
                              </div>
                            )}
                            <div className="mt-2 pt-2 border-t border-green-900 flex items-center justify-between">
                              <span className="text-green-600">Firewall:</span>
                              <span className={`font-semibold ${device.firewall_enabled ? 'text-green-400' : 'text-red-400'}`}>
                                {device.firewall_enabled ? '‚úì ENABLED' : '‚úó DISABLED'}
                              </span>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </Card>
                </section>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  {/* Left: Layers & Features */}
                  <div className="lg:col-span-2 space-y-6">
                    <Card title="[SECURITY ARCHITECTURE LAYERS]">
                      <div className="space-y-4">
                        {data.layers.map((l) => (
                          <div key={l.id} className="flex items-start gap-4 bg-black/60 p-4 rounded-lg border border-green-600 hover:border-green-400 hover:shadow-[0_0_10px_rgba(0,255,0,0.3)] transition-all">
                            <div className="rounded p-2 bg-green-900/40 border border-green-600 flex-none">
                              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L2 7v7c0 5 5 9 10 9s10-4 10-9V7L12 2z" stroke="#00ff00" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
                              </svg>
                            </div>
                            <div className="flex-1">
                              <div className="flex items-center justify-between">
                                <h3 className="text-lg font-semibold text-green-400">[LAYER_{l.id}] {l.name}</h3>
                                <span className="px-3 py-1 text-xs border border-green-500 text-green-400 bg-green-900/20">‚úì {l.state}</span>
                              </div>
                              <p className="text-green-600 text-sm mt-2">&gt; {l.desc}</p>
                            </div>
                          </div>
                        ))}
                      </div>
                    </Card>

                    <Card title="[CORE SECURITY FEATURES]">
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {data.coreFeatures.map((f, i) => (
                          <div key={i} className="bg-black/60 p-4 rounded-lg border border-green-700 hover:border-green-500 hover:shadow-[0_0_8px_rgba(0,255,0,0.2)] transition-all">
                            <h4 className="font-semibold text-green-400 mb-2">&gt; {f.title}</h4>
                            <p className="text-sm text-green-600">:: {f.desc}</p>
                          </div>
                        ))}
                      </div>
                    </Card>

                    <Card title="[ADVANCED THREAT DETECTION]">
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {data.advancedThreats.map((t, i) => (
                          <div key={i} className="bg-black/60 p-4 rounded-lg border border-green-700 hover:border-green-500 hover:shadow-[0_0_8px_rgba(0,255,0,0.2)] transition-all">
                            <h4 className="font-semibold text-green-400 mb-2">&gt; {t.title}</h4>
                            <p className="text-sm text-green-600">:: {t.desc}</p>
                          </div>
                        ))}
                      </div>
                    </Card>
                  </div>

                  {/* Right: APIs & Quick Actions */}
                  <aside className="space-y-6">
                    <Card title="[QUICK ACTIONS]">
                      <div className="flex flex-col gap-3">
                        <button
                          onClick={handleRiskAssessment}
                          disabled={loading.risk}
                          className="w-full py-3 rounded-lg bg-black border-2 border-green-500 text-green-400 hover:bg-green-900/20 hover:shadow-[0_0_15px_rgba(0,255,0,0.5)] font-medium transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed uppercase">
                          {loading.risk ? '‚è≥ Running...' : '&gt; Run Risk Assessment'}
                        </button>
                        <button
                          onClick={handlePolicyAudit}
                          disabled={loading.policy}
                          className="w-full py-3 rounded-lg bg-black border-2 border-green-500 text-green-400 hover:bg-green-900/20 hover:shadow-[0_0_15px_rgba(0,255,0,0.5)] font-medium transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed uppercase">
                          {loading.policy ? '‚è≥ Auditing...' : '&gt; Trigger Policy Audit'}
                        </button>
                        <button
                          onClick={handleBlockIP}
                          disabled={loading.firewall}
                          className="w-full py-3 rounded-lg bg-black border-2 border-red-500 text-red-400 hover:bg-red-900/20 hover:shadow-[0_0_15px_rgba(255,0,0,0.5)] font-medium transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed uppercase">
                          {loading.firewall ? '‚è≥ Blocking...' : '&gt; Block IP / Firewall'}
                        </button>
                        <button
                          onClick={handleTrainModels}
                          disabled={loading.training}
                          className="w-full py-3 rounded-lg bg-black border-2 border-green-500 text-green-400 hover:bg-green-900/20 hover:shadow-[0_0_15px_rgba(0,255,0,0.5)] font-medium transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed uppercase">
                          {loading.training ? '‚è≥ Training...' : '&gt; Train ML Models'}
                        </button>
                        <button
                          onClick={async () => {
                            setLoading(prev => ({ ...prev, alert: true }));
                            try {
                              const response = await fetch('/api/threat/simulate', { method: 'POST' });
                              const result = await response.json();
                              if (response.ok) {
                                showNotification(`üö® Threat Simulated! ${result.threat.threat_type} (${result.threat.severity.toUpperCase()}) - Alerts sent via SMS, WhatsApp & Email!`, 'success');
                              } else {
                                showNotification('Failed to simulate threat', 'error');
                              }
                            } catch (error) {
                              showNotification('Error simulating threat', 'error');
                            }
                            setLoading(prev => ({ ...prev, alert: false }));
                          }}
                          disabled={loading.alert}
                          className="w-full py-3 rounded-lg bg-black border-2 border-yellow-500 text-yellow-400 hover:bg-yellow-900/20 hover:shadow-[0_0_15px_rgba(255,255,0,0.5)] font-medium transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed uppercase">
                          {loading.alert ? '‚è≥ Simulating...' : 'üö® Simulate Threat + Alert'}
                        </button>
                        <button
                          onClick={async () => {
                            setLoading(prev => ({ ...prev, testAlert: true }));
                            try {
                              const response = await fetch('/api/alerts/test', { method: 'POST' });
                              const result = await response.json();
                              if (response.ok) {
                                showNotification(`‚úÖ Test alert sent successfully via SMS, WhatsApp & Email!`, 'success');
                              } else {
                                showNotification('Failed to send test alert', 'error');
                              }
                            } catch (error) {
                              showNotification('Error sending test alert', 'error');
                            }
                            setLoading(prev => ({ ...prev, testAlert: false }));
                          }}
                          disabled={loading.testAlert}
                          className="w-full py-3 rounded-lg bg-black border-2 border-blue-500 text-blue-400 hover:bg-blue-900/20 hover:shadow-[0_0_15px_rgba(0,100,255,0.5)] font-medium transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed uppercase">
                          {loading.testAlert ? '‚è≥ Testing...' : 'üì± Test Alert System'}
                        </button>
                        <div className="mt-4 p-3 bg-black/60 rounded-lg border border-green-700 text-center">
                          <div className="text-xs text-green-600 mb-1 uppercase">[Alert System Active]</div>
                          <div className="text-xs text-green-500">SMS, WhatsApp & Email notifications enabled for all threats!</div>
                        </div>
                      </div>
                    </Card>

                    <Card title="[API ENDPOINTS]">
                      <div className="max-h-64 overflow-auto text-sm bg-black/60 rounded-lg p-4 border border-green-800">
                        <ul className="space-y-2">
                          {data.api.map((e, i) => (
                            <li key={i} className="font-mono text-xs text-green-600 hover:text-green-400 transition-colors">&gt; {e}</li>
                          ))}
                        </ul>
                      </div>
                    </Card>

                    <Card title="[SYSTEM MONITORING]">
                      <div className="text-sm space-y-3">
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">Suite Status</span>
                          <strong className="text-green-400">{data.status}</strong>
                        </div>
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">CPU Usage</span>
                          <span className="font-mono text-xs text-green-400">{data.liveMetrics?.cpu_usage || 0}%</span>
                        </div>
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">Memory Usage</span>
                          <span className="font-mono text-xs text-green-400">{data.liveMetrics?.memory_usage || 0}%</span>
                        </div>
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">Active Threats</span>
                          <span className="font-mono text-xs text-red-400">{data.liveMetrics?.active_threats || 0}</span>
                        </div>
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">Architecture</span>
                          <span className="text-xs text-green-400">4-Layer</span>
                        </div>
                      </div>
                    </Card>

                    <Card title="[SECURITY FEATURES]">
                      <div className="text-sm space-y-3">
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">Multi-Factor Auth</span>
                          <span className="text-green-400 font-semibold">‚úì ENABLED</span>
                        </div>
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">E2E Encryption</span>
                          <span className="text-green-400 font-semibold">‚úì AES-256-GCM</span>
                        </div>
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">TLS/SSL</span>
                          <span className="text-green-400 font-semibold">‚úì TLS 1.3</span>
                        </div>
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">Firewall</span>
                          <span className="text-green-400 font-semibold">‚úì ACTIVE</span>
                        </div>
                        <div className="flex items-center justify-between p-3 bg-black/60 rounded-lg border border-green-800">
                          <span className="text-green-600 uppercase">IDS/IPS</span>
                          <span className="text-green-400 font-semibold">‚úì MONITORING</span>
                        </div>
                      </div>
                    </Card>
                  </aside>
                </div>

                <footer className="mt-8 text-center text-sm text-gray-500 py-4 border-t border-gray-200">
                  ¬© 2025 Adaptive Security Suite ‚Ä¢ Real-time Monitoring ‚Ä¢ Enterprise-Grade Protection
                </footer>
              </div>
            </div>
          );
        }

        function DetailedReportModal({ modalData, onClose }) {
          if (!modalData) return null;

          const { type, data } = modalData;

          return (
            <div className="fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/95 backdrop-blur-sm" onClick={onClose}>
              <div className="bg-black rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-green-500 shadow-[0_0_30px_rgba(0,255,0,0.5)] animate-fadeIn" onClick={(e) => e.stopPropagation()}>
                <div className="sticky top-0 bg-black p-6 border-b-2 border-green-600 flex justify-between items-center z-10">
                  <h2 className="text-2xl font-bold text-green-400 uppercase font-mono">
                    {type === 'risk-assessment' && '[COMPREHENSIVE RISK ASSESSMENT REPORT]'}
                    {type === 'policy-audit' && '[DETAILED POLICY AUDIT REPORT]'}
                    {type === 'block-ip' && '[IP BLOCKING ACTION REPORT]'}
                  </h2>
                  <button onClick={onClose} className="text-green-400 hover:text-green-300 text-3xl leading-none border-2 border-green-600 px-3 py-1 rounded hover:shadow-[0_0_10px_rgba(0,255,0,0.5)]">&times;</button>
                </div>

                <div className="p-6 space-y-6">
                  {type === 'risk-assessment' && (
                    <div className="space-y-6">
                      <div className="grid grid-cols-4 gap-4">
                        <div className="bg-black/80 p-4 rounded-lg border-2 border-green-600">
                          <div className="text-xs text-green-600 uppercase">Risk Score</div>
                          <div className="text-3xl font-bold text-green-400 font-mono">{data.overall_risk_score}/100</div>
                          <div className="text-xs text-green-400 mt-1 uppercase">{data.risk_level}</div>
                        </div>
                        <div className="bg-black/80 p-4 rounded-lg border-2 border-red-600">
                          <div className="text-xs text-red-600 uppercase">Threats Detected</div>
                          <div className="text-3xl font-bold text-red-400 font-mono">{data.executive_summary?.total_threats_detected || 0}</div>
                        </div>
                        <div className="bg-black/80 p-4 rounded-lg border-2 border-green-600">
                          <div className="text-xs text-green-600 uppercase">Policies Enforced</div>
                          <div className="text-3xl font-bold text-green-400 font-mono">{data.executive_summary?.total_policies_enforced || 0}</div>
                        </div>
                        <div className="bg-black/80 p-4 rounded-lg border-2 border-green-600">
                          <div className="text-xs text-green-600 uppercase">Uptime</div>
                          <div className="text-2xl font-bold text-green-400 font-mono">{data.executive_summary?.system_uptime || 'N/A'}</div>
                        </div>
                      </div>

                      <div>
                        <h3 className="text-xl font-semibold mb-3 text-green-400 uppercase font-mono">[Security Categories]</h3>
                        <div className="space-y-3">
                          {data.findings?.map((f, i) => (
                            <div key={i} className="bg-black/60 p-4 rounded-lg border border-green-700">
                              <div className="flex justify-between items-center mb-2">
                                <h4 className="font-semibold text-lg text-green-400">&gt; {f.category}</h4>
                                <span className={`px-3 py-1 border text-xs font-semibold font-mono ${f.status === 'EXCELLENT' ? 'border-green-500 text-green-400 bg-green-900/20' : f.status === 'GOOD' ? 'border-green-600 text-green-500 bg-green-900/10' : 'border-yellow-500 text-yellow-400 bg-yellow-900/20'}`}>
                                  [{f.score}/100 - {f.status}]
                                </span>
                              </div>
                              {f.details && (
                                <div className="grid grid-cols-2 gap-2 text-sm mt-3">
                                  {Object.entries(f.details).map(([key, value]) => (
                                    <div key={key} className="flex justify-between">
                                      <span className="text-green-600">{key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}:</span>
                                      <span className="text-green-400 font-mono">{typeof value === 'boolean' ? (value ? '‚úì' : '‚úó') : value}</span>
                                    </div>
                                  ))}
                                </div>
                              )}
                              {f.risks_identified && f.risks_identified.length > 0 && (
                                <div className="mt-3 pl-4 border-l-2 border-yellow-500/50">
                                  <div className="text-xs text-green-600 mb-1 uppercase">[Risks Identified]</div>
                                  {f.risks_identified.map((risk, ri) => (
                                    <div key={ri} className="text-sm text-yellow-400">&gt; {risk}</div>
                                  ))}
                                </div>
                              )}
                            </div>
                          ))}
                        </div>
                      </div>

                      {data.vulnerabilities && data.vulnerabilities.length > 0 && (
                        <div>
                          <h3 className="text-xl font-semibold mb-3 text-red-400 uppercase font-mono">[Vulnerabilities]</h3>
                          <div className="space-y-2">
                            {data.vulnerabilities.map((v, i) => (
                              <div key={i} className="bg-red-900/20 border-2 border-red-500/50 p-4 rounded-lg">
                                <div className="flex justify-between items-start mb-2">
                                  <h4 className="font-semibold text-red-400">&gt; {v.title}</h4>
                                  <span className={`px-2 py-1 border text-xs font-mono ${v.severity === 'HIGH' ? 'bg-red-600 border-red-400' : v.severity === 'MEDIUM' ? 'bg-orange-600 border-orange-400' : 'bg-yellow-600 border-yellow-400'}`}>
                                    [{v.severity}] CVSS: {v.cvss_score}
                                  </span>
                                </div>
                                <p className="text-sm text-red-300 mb-2">:: {v.description}</p>
                                <div className="text-sm">
                                  <div className="text-green-600">Impact: <span className="text-green-400">{v.impact}</span></div>
                                  <div className="text-green-600">Remediation: <span className="text-green-300">{v.remediation}</span></div>
                                </div>
                              </div>
                            ))}
                          </div>
                        </div>
                      )}

                      {data.recommendations && (
                        <div>
                          <h3 className="text-xl font-semibold mb-3 text-green-400 uppercase font-mono">[Recommendations]</h3>
                          <div className="grid grid-cols-3 gap-4">
                            {Object.entries(data.recommendations).map(([priority, items]) => (
                              <div key={priority} className="bg-black/60 p-4 rounded-lg border border-green-700">
                                <h4 className="font-semibold mb-2 capitalize text-green-400 uppercase font-mono">[{priority.replace('_', ' ')}]</h4>
                                <ul className="space-y-1 text-sm">
                                  {items.map((item, i) => (
                                    <li key={i} className="text-green-500">&gt; {item}</li>
                                  ))}
                                </ul>
                              </div>
                            ))}
                          </div>
                        </div>
                      )}
                    </div>
                  )}

                  {type === 'policy-audit' && (
                    <div className="space-y-6">
                      <div className="grid grid-cols-4 gap-4">
                        <div className="bg-black/80 p-4 rounded-lg border-2 border-green-600">
                          <div className="text-xs text-green-600 uppercase">Compliance Score</div>
                          <div className="text-3xl font-bold text-green-400 font-mono">{data.compliance_score}%</div>
                        </div>
                        <div className="bg-black/80 p-4 rounded-lg border-2 border-green-600">
                          <div className="text-xs text-green-600 uppercase">Policies Checked</div>
                          <div className="text-3xl font-bold text-green-400 font-mono">{data.policies_checked}</div>
                        </div>
                        <div className="bg-black/80 p-4 rounded-lg border-2 border-green-600">
                          <div className="text-xs text-green-600 uppercase">Passed</div>
                          <div className="text-3xl font-bold text-green-400 font-mono">{data.policies_passed}</div>
                        </div>
                        <div className="bg-black/80 p-4 rounded-lg border-2 border-red-600">
                          <div className="text-xs text-red-600 uppercase">Failed</div>
                          <div className="text-3xl font-bold text-red-400 font-mono">{data.policies_failed}</div>
                        </div>
                      </div>

                      {data.policy_categories && (
                        <div>
                          <h3 className="text-xl font-semibold mb-3 text-green-400 uppercase font-mono">[Policy Categories]</h3>
                          <div className="space-y-4">
                            {data.policy_categories.map((cat, i) => (
                              <div key={i} className="bg-black/60 p-4 rounded-lg border border-green-700">
                                <div className="flex justify-between items-center mb-3">
                                  <h4 className="font-semibold text-lg text-green-400">&gt; {cat.category}</h4>
                                  <div className="flex gap-4 text-sm font-mono">
                                    <span className="text-green-400">[{cat.passed} passed]</span>
                                    <span className="text-red-400">[{cat.failed} failed]</span>
                                    <span className="text-green-500">[{cat.score}%]</span>
                                  </div>
                                </div>
                                <div className="space-y-2">
                                  {cat.policies?.slice(0, 3).map((pol, pi) => (
                                    <div key={pi} className={`text-sm p-2 rounded border ${pol.status === 'PASSED' ? 'bg-green-900/20 border-green-700' : 'bg-red-900/20 border-red-700'}`}>
                                      <div className="flex justify-between">
                                        <span className={`font-medium ${pol.status === 'PASSED' ? 'text-green-400' : 'text-red-400'}`}>&gt; {pol.name}</span>
                                        <span className={`font-mono ${pol.status === 'PASSED' ? 'text-green-400' : 'text-red-400'}`}>[{pol.status}]</span>
                                      </div>
                                      <div className="text-xs text-green-600 mt-1">:: {pol.description}</div>
                                    </div>
                                  ))}
                                </div>
                              </div>
                            ))}
                          </div>
                        </div>
                      )}

                      {data.compliance_frameworks && (
                        <div>
                          <h3 className="text-xl font-semibold mb-3 text-green-400 uppercase font-mono">[Compliance Frameworks]</h3>
                          <div className="grid grid-cols-2 gap-4">
                            {Object.entries(data.compliance_frameworks).map(([framework, info]) => (
                              <div key={framework} className="bg-black/60 p-4 rounded-lg border border-green-700">
                                <div className="flex justify-between items-center mb-2">
                                  <h4 className="font-semibold text-green-400 uppercase">{framework}</h4>
                                  <span className={`px-2 py-1 border text-xs font-mono ${info.status === 'Compliant' ? 'bg-green-600 border-green-400' : 'bg-red-600 border-red-400'}`}>
                                    [{info.status}]
                                  </span>
                                </div>
                                <div className="text-sm space-y-1 text-green-500">
                                  <div>Score: <span className="text-green-400 font-mono">{info.score}%</span></div>
                                  <div>Policies: <span className="font-mono">{info.passed}/{info.applicable_policies}</span></div>
                                  <div className="text-xs text-green-600">Next audit: {info.next_audit}</div>
                                </div>
                              </div>
                            ))}
                          </div>
                        </div>
                      )}
                    </div>
                  )}

                  {type === 'block-ip' && (
                    <div className="space-y-6">
                      <div className="bg-black/80 p-6 rounded-lg border-2 border-red-600">
                        <h3 className="text-xl font-semibold mb-4 text-red-400 uppercase font-mono">[Blocking Details]</h3>
                        <div className="grid grid-cols-2 gap-4 text-sm">
                          <div><span className="text-green-600 uppercase">IP Address:</span> <span className="text-red-400 font-mono">{data.ip_address}</span></div>
                          <div><span className="text-green-600 uppercase">Rule ID:</span> <span className="text-green-400 font-mono">{data.rule_id}</span></div>
                          <div><span className="text-green-600 uppercase">Action:</span> <span className="text-red-400 font-semibold uppercase">{data.action}</span></div>
                          <div><span className="text-green-600 uppercase">Timestamp:</span> <span className="text-green-400 font-mono">{data.timestamp}</span></div>
                          {data.details && (
                            <>
                              <div><span className="text-green-600 uppercase">Method:</span> <span className="text-green-400">{data.details.blocking_method}</span></div>
                              <div><span className="text-green-600 uppercase">Layer:</span> <span className="text-green-400">{data.details.enforcement_layer}</span></div>
                            </>
                          )}
                        </div>
                      </div>

                      {data.enforcement_actions && (
                        <div>
                          <h3 className="text-xl font-semibold mb-3 text-green-400 uppercase font-mono">[Enforcement Actions]</h3>
                          <div className="space-y-2">
                            {data.enforcement_actions.map((action, i) => (
                              <div key={i} className="bg-green-900/20 border-2 border-green-500/50 p-3 rounded-lg flex justify-between items-center">
                                <div>
                                  <div className="font-semibold text-green-400">&gt; {action.layer}</div>
                                  <div className="text-sm text-green-600">:: {action.action}</div>
                                </div>
                                <span className="text-green-400 font-semibold font-mono">[{action.status}]</span>
                              </div>
                            ))}
                          </div>
                        </div>
                      )}

                      {data.recommendations && (
                        <div>
                          <h3 className="text-xl font-semibold mb-3 text-green-400 uppercase font-mono">[Recommendations]</h3>
                          <ul className="space-y-2">
                            {data.recommendations.map((rec, i) => (
                              <li key={i} className="text-sm text-green-500 bg-black/60 p-3 rounded border border-green-800">&gt; {rec}</li>
                            ))}
                          </ul>
                        </div>
                      )}
                    </div>
                  )}
                </div>

                <div className="sticky bottom-0 bg-black p-4 border-t-2 border-green-600">
                  <button onClick={onClose} className="w-full py-3 rounded-lg bg-black border-2 border-green-500 text-green-400 hover:bg-green-900/20 hover:shadow-[0_0_15px_rgba(0,255,0,0.5)] font-medium transition-all uppercase">
                    &gt; Close Report
                  </button>
                </div>
              </div>
            </div>
          );
        }

        function Card({ title, children }) {
          return (
            <div className="bg-white rounded-xl p-6 shadow-sm">
              <h4 className="text-gray-900 font-semibold mb-4 text-lg">{title}</h4>
              <div>{children}</div>
            </div>
          );
        }

        function MetricCard({ title, value }) {
          return (
            <div className="p-6 rounded-xl bg-white shadow-sm hover:shadow-md transition-all">
              <div className="text-sm text-gray-500 mb-2 uppercase">{title}</div>
              <div className="text-4xl font-bold text-gray-900">
                {value.toLocaleString()}
              </div>
            </div>
          );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AdaptiveSecurityDashboard />);
    </script>
</body>
</html>
